<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>حفل جوائز لعبة السنة 2025</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Fonts: Amiri (Arabic) & Lexend (English) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400;1,700&family=Lexend:wght@300;400;700;900&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Amiri', serif; background-color: black; color: white; }
        .font-english { font-family: 'Lexend', sans-serif; }
        /* Custom scrollbar */
        .scrollbar-thin::-webkit-scrollbar { width: 6px; }
        .scrollbar-thin::-webkit-scrollbar-track { background: rgba(255,255,255,0.1); }
        .scrollbar-thin::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.3); border-radius: 10px; }
        
        /* Animation utilities */
        .animate-fade-in { animation: fadeIn 0.8s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- ICONS ---
        const IconWrapper = ({ children, className, size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
        );
        const Trophy = (p) => <IconWrapper {...p}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></IconWrapper>;
        const ArrowRight = (p) => <IconWrapper {...p}><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></IconWrapper>; // Actually points Left in RTL
        const ArrowLeft = (p) => <IconWrapper {...p}><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></IconWrapper>;   // Actually points Right in RTL
        const Music = (p) => <IconWrapper {...p}><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></IconWrapper>;
        const Gamepad2 = (p) => <IconWrapper {...p}><line x1="6" x2="10" y1="12" y2="12"/><line x1="8" x2="8" y1="10" y2="14"/><line x1="15" x2="15.01" y1="13" y2="13"/><line x1="18" x2="18.01" y1="11" y2="11"/><rect width="20" height="12" x="2" y="6" rx="2"/></IconWrapper>;
        const Paintbrush = (p) => <IconWrapper {...p}><path d="M18.37 2.63 14 7l-1.59-1.59a2 2 0 0 0-2.82 0L8 7l9 9 1.59-1.59a2 2 0 0 0 0-2.82L17 10l4.37-4.37a2.12 2.12 0 1 0-3-3Z"/><path d="M9 8c-2 3-4 3.5-7 4l8 10c2-1 6-5 6-7"/><path d="M14.5 17.5 4.5 15"/></IconWrapper>;
        const BookOpen = (p) => <IconWrapper {...p}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></IconWrapper>;
        const Users = (p) => <IconWrapper {...p}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></IconWrapper>;
        const Ghost = (p) => <IconWrapper {...p}><path d="M9 10h.01"/><path d="M15 10h.01"/><path d="M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"/></IconWrapper>;
        const Clock = (p) => <IconWrapper {...p}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></IconWrapper>;
        const Skull = (p) => <IconWrapper {...p}><circle cx="9" cy="12" r="1"/><circle cx="15" cy="12" r="1"/><path d="M8 20v2h8v-2"/><path d="m12.5 17-.5-1-.5 1h1z"/><path d="M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20"/></IconWrapper>;
        const Sparkles = (p) => <IconWrapper {...p}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 3v4"/><path d="M3 5h4"/><path d="M3 9h4"/></IconWrapper>;
        const Star = (p) => <IconWrapper {...p}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></IconWrapper>;
        const Mic2 = (p) => <IconWrapper {...p}><path d="m12 8-9.04 9.06a2.82 2.82 0 1 0 3.98 3.98l9.06-9.04"/><path d="M12 8a2.82 2.82 0 1 0 3.98 3.98l9.06-9.04L12 8Z"/><path d="m16 5 3 3"/></IconWrapper>;
        const Play = (p) => <IconWrapper {...p}><polygon points="5 3 19 12 5 21 5 3"/></IconWrapper>;

        // --- DATA & CONFIGURATION ---

        const STAGE_1_VOTES = [
            { name: "NbTuN", goty: "Clair Obscur: Expedition 33, Monster Hunter Wilds, Doom: The Dark Ages", gameplay: "clair obscure expdetion 33, monster hunter wilds", story: "Kingdom Come: Deliverance II, clair obscure expdetion 33, The Alters", art: "clair obscure expdetion 33, No, I'm Not a Human, hades 2", music: "clair obscure expdetion 33, dynasty warriors origins, south of midnight", indie: "pistrello and the cursed yoyo, clair obscure expdetion 33, Advent NEON, Haste", remaster: "The Elder Scrolls IV: Oblivion Remastered, Ninja Gaiden 2 Black", multi: "dying light the beast, Mario Kart World, Split Fiction", flop: "vampire: the masquerade - bloodlines 2, Little Nightmares 3, lost soul aside", anticipated: "The Witcher 4, resdient evil 9, judas", char: "verso, gustave, jan", boss: "curator, Zoh Shia, the dragon everhood 2, Enhanced dark dragon", song: "Horizon Dreamer https://youtu.be/DJq0jJhPSjg, Une vie à t'aimer, lisrim golden, CAPRICIOUS WIND, rougarou", honorable: "Trepang2" },
            { name: "sal", goty: "Kingdom Come: Deliverance II", gameplay: "clair obscure expdetion 33, kingdom come deliverance2", story: "Kingdom Come: Deliverance II, clair obscure expdetion 33, death stranding 2", art: "clair obscure expdetion 33, ghost of yotei", music: "clair obscure expdetion 33, dynasty warriors origins", indie: "clair obscure expdetion 33", remaster: "The Elder Scrolls IV: Oblivion Remastered, METAL GEAR SOLID Δ: SNAKE EATER", multi: "dying light the beast, battlefield 6", flop: "vampire: the masquerade - bloodlines 2", anticipated: "The Witcher 4, crimson Desert, lego batman", char: "verso, Maelle, henry", boss: "Arlecchino, the Blood Artist, Visages", song: "Une vie à t'aimer, Lumière, Alicia, The Clear Blue Sky", honorable: "" },
            { name: "القوت", goty: "Clair Obscur: Expedition 33", gameplay: "clair obscure expdetion 33", story: "clair obscure expdetion 33", art: "clair obscure expdetion 33, death stranding 2, ghost of yotei", music: "clair obscure expdetion 33, death stranding 2", indie: "clair obscure expdetion 33", remaster: "", multi: "Mario Kart World, battlefield 6, rv there yet", flop: "dispatch", anticipated: "The Witcher 4, judas, gta 6", char: "verso", boss: "Arlecchino, the Blood Artist, King K. Rool, Fulghor Champion of Nightglow", song: "to the wilder, Une vie à t'aimer, Lumière", honorable: "Ai Baby gif" },
            { name: "Omar", goty: "Hollow Knight: Silksong", gameplay: "hollow knight silksong", story: "hollow knight silksong", art: "hollow knight silksong", music: "hollow knight silksong", indie: "hollow knight silksong", remaster: "", multi: "", flop: "Hunter x Hunter: Nen x Impact, Bleach Rebirth of Souls", anticipated: "", char: "hornet", boss: "tormented trobbio", song: "", honorable: "" },
            { name: "Potato Lover", goty: "Clair Obscur: Expedition 33, Hollow Knight: Silksong", gameplay: "hollow knight silksong", story: "clair obscure expdetion 33", art: "clair obscure expdetion 33, hollow knight silksong, death stranding 2", music: "clair obscure expdetion 33, death stranding 2", indie: "clair obscure expdetion 33, hollow knight silksong", remaster: "", multi: "elden ring nightreign", flop: "Hunter x Hunter: Nen x Impact, lost soul aside", anticipated: "MARVEL Tokon: Fighting Souls, stranger of heaven, dusk blood", char: "verso", boss: "curator", song: "to the wilder, story of rainy, Une vie à t'aimer, Lumière, Skarrsinger Karmelita", honorable: "" },
            { name: "ماجد", goty: "Clair Obscur: Expedition 33", gameplay: "ninja gaiden 4", story: "clair obscure expdetion 33", art: "clair obscure expdetion 33, hollow knight silksong, death stranding 2", music: "clair obscure expdetion 33, death stranding 2", indie: "clair obscure expdetion 33, hollow knight silksong", remaster: "The Elder Scrolls IV: Oblivion Remastered, Xenoblade chronicles x definitive edition", multi: "battlefield 6", flop: "vampire: the masquerade - bloodlines 2", anticipated: "The Witcher 4, judas", char: "verso", boss: "simon, Zoh Shia, Enhanced dark dragon", song: "to the wilder, Lumière, phantom", honorable: "Psychonauts" },
            { name: "اللواء جيري", goty: "Clair Obscur: Expedition 33", gameplay: "Doom: The Dark Ages, ninja gaiden 4, Khazan", story: "clair obscure expdetion 33", art: "clair obscure expdetion 33, ghost of yotei, Split Fiction", music: "clair obscure expdetion 33", indie: "clair obscure expdetion 33", remaster: "اي حاجة غير نينجا قايدن وميتل خرا", multi: "Split Fiction", flop: "lost soul aside", anticipated: "onimusha way of the sword, stranger of heaven, resdient evil 9", char: "renoir, verso, Maelle", boss: "simon, curator, maluka, Ryu Hayabusa", song: "Une vie à t'aimer, aline ost and renoir final boss phase 2", honorable: "" },
            { name: "PXL", goty: "Clair Obscur: Expedition 33, Monster Hunter Wilds", gameplay: "clair obscure expdetion 33", story: "clair obscure expdetion 33", art: "hollow knight silksong, ghost of yotei, Split Fiction", music: "clair obscure expdetion 33, hollow knight silksong", indie: "clair obscure expdetion 33, Haste", remaster: "METAL GEAR SOLID Δ: SNAKE EATER", multi: "Split Fiction, mage arena, Elden Ring Nightrain", flop: "Hunter x Hunter: Nen x Impact, Bleach Rebirth of Souls", anticipated: "phantom blade zero, The Witcher 4", char: "gustave, Jeff The Shark (MR), Revenant (ER), Duchess (ER)", boss: "Fulghor Champion of Nightglow, The wylder remembrance ending cutscene", song: "story of rainy, Une vie à t'aimer, Caligo, Miasma Of Night", honorable: "Balatro, Hearthstone" },
            { name: "silver", goty: "Clair Obscur: Expedition 33, ninja gaiden 4", gameplay: "clair obscure expdetion 33, ninja gaiden 4", story: "clair obscure expdetion 33, south of midnight", art: "clair obscure expdetion 33, Shinobi: Art of Vengeance, Bye Sweet Carole", music: "clair obscure expdetion 33, south of midnight, hades 2", indie: "clair obscure expdetion 33, Haste", remaster: "", multi: "dying light the beast, battlefield 6, rv there yet", flop: "vampire: the masquerade - bloodlines 2, lost soul aside, Split Fiction", anticipated: "stranger of heaven, The Witcher 4, crimson Desert", char: "renoir, verso, Maelle", boss: "Visages, Sirene, curator, Enhanced dark dragon", song: "story of rainy, Une vie à t'aimer, Lumière, lisrim golden, cherie tree", honorable: "prince of persia the lost crown" },
            { name: "معوذي", goty: "Clair Obscur: Expedition 33", gameplay: "hollow knight silksong, ninja gaiden 4, The First Berserker: Khazan", story: "Kingdom Come: Deliverance II, clair obscure expdetion 33, The Alters", art: "hollow knight silksong, death stranding 2, sword of the sea", music: "clair obscure expdetion 33, dynasty warriors origins, death stranding 2", indie: "clair obscure expdetion 33, hollow knight silksong, hades 2", remaster: "The Elder Scrolls IV: Oblivion Remastered, METAL GEAR SOLID Δ: SNAKE EATER", multi: "rv there yet, peak, R.E.P.O.", flop: "vampire: the masquerade - bloodlines 2, Little Nightmares 3, lost soul aside", anticipated: "stranger of heaven, Marvel's Wolverine, dusk blood", char: "verso, henry, jan", boss: "Arlecchino, the Blood Artist, curator, Fulghor Champion of Nightglow, Enhanced dark dragon", song: "Gestral Village Golgra, The Clear Blue Sky, CAPRICIOUS WIND, Open Your Heart, Last Dive", honorable: "Bioshock Infinite" },
            { name: "K-Tap", goty: "Hollow Knight: Silksong", gameplay: "hollow knight silksong", story: "clair obscure expdetion 33", art: "clair obscure expdetion 33, ghost of yotei, Dispatch", music: "", indie: "Dispatch", remaster: "METAL GEAR SOLID Δ: SNAKE EATER", multi: "ARC Raiders, peak", flop: "", anticipated: "Marvel's Wolverine, resdient evil 9, gta 6", char: "hornet, Robert robertson the third", boss: "", song: "", honorable: "Hollow kbight" },
            { name: "عزوز", goty: "Doom: The Dark Ages", gameplay: "dying light the beast", story: "clair obscure expdetion 33", art: "clair obscure expdetion 33", music: "", indie: "clair obscure expdetion 33", remaster: "METAL GEAR SOLID Δ: SNAKE EATER", multi: "Sonic Racing: CrossWorlds", flop: "elden ring nightreign, Fortnite", anticipated: "The Witcher 4", char: "", boss: "", song: "", honorable: "" },
            { name: "yuki", goty: "Clair Obscur: Expedition 33, Hollow Knight: Silksong", gameplay: "clair obscure expdetion 33, hollow knight silksong", story: "clair obscure expdetion 33, hollow knight silksong", art: "clair obscure expdetion 33, hollow knight silksong, Split Fiction", music: "clair obscure expdetion 33", indie: "hollow knight silksong", remaster: "trails in the sky 1st chapter", multi: "dying light the beast, Split Fiction", flop: "lost soul aside", anticipated: "The Witcher 4, resdient evil 9, tides of annihilation", char: "renoir, verso, gustave", boss: "renoir secoend fight, simon, scar singer", song: "Une vie à t'aimer, Lumière, Skarrsinger Karmelita", honorable: "" },
            { name: "فراس", goty: "Kingdom Come: Deliverance II, Clair Obscur: Expedition 33, Hollow Knight: Silksong", gameplay: "ninja gaiden 4, The First Berserker: Khazan", story: "Kingdom Come: Deliverance II, clair obscure expdetion 33, The Alters", art: "hollow knight silksong, death stranding 2, sword of the sea", music: "clair obscure expdetion 33, dynasty warriors origins, death stranding 2", indie: "clair obscure expdetion 33, hollow knight silksong, hades 2", remaster: "The Elder Scrolls IV: Oblivion Remastered, METAL GEAR SOLID Δ: SNAKE EATER", multi: "Split Fiction", flop: "vampire: the masquerade - bloodlines 2, Little Nightmares 3, lost soul aside", anticipated: "stranger of heaven, Marvel's Wolverine, dusk blood", char: "verso, henry, jan", boss: "Arlecchino, the Blood Artist, curator, Fulghor Champion of Nightglow, Enhanced dark dragon", song: "Gestral Village Golgra, The Clear Blue Sky, CAPRICIOUS WIND, Open Your Heart, Last Dive", honorable: "Bioshock Infinite" }
        ];

        const STAGE_2_VOTES = [
            { name: "sal", goty: "Kingdom Come: Deliverance II", gameplay: "clair obscure expdetion 33", story: "clair obscure expdetion 33", art: "clair obscure expdetion 33", music: "clair obscure expdetion 33", indie: "clair obscure expdetion 33", remaster: "The Elder Scrolls IV: Oblivion Remastered", multi: "elden ring nightreign", flop: "vampire: the masquerade - bloodlines 2", anticipated: "The Witcher 4", char: "renoir", boss: "Arlecchino, the Blood Artist", song: "Lumière https://youtu.be/zmvsw2ILX5k", honorable: "Bioshock Infinite" },
            { name: "Potato lover", goty: "Hollow Knight: Silksong", gameplay: "hollow knight silksong", story: "clair obscure expdetion 33", art: "clair obscure expdetion 33", music: "death stranding 2", indie: "hollow knight silksong", remaster: "", multi: "elden ring nightreign", flop: "Hunter x Hunter: Nen x Impact", anticipated: "stranger of heaven", char: "verso", boss: "curator", song: "to the wilder https://www.youtube.com/watch?v=BSN1rPPKK9s", honorable: "Bioshock Infinite" },
            { name: "ماجد", goty: "Clair Obscur: Expedition 33", gameplay: "ninja gaiden 4", story: "clair obscure expdetion 33", art: "hollow knight silksong", music: "death stranding 2", indie: "clair obscure expdetion 33", remaster: "Xenoblade Chronicles X", multi: "battlefield 6", flop: "lost soul aside", anticipated: "The Witcher 4", char: "verso", boss: "Enhanced dark dragon", song: "Une vie à peindre https://www.youtube.com/watch?v=-i_nT9d-mK8", honorable: "Psychonauts" },
            { name: "yuki", goty: "Clair Obscur: Expedition 33", gameplay: "hollow knight silksong", story: "clair obscure expdetion 33", art: "split fiction", music: "clair obscure expdetion 33", indie: "clair obscure expdetion 33", remaster: "trails in the sky 1st chapter", multi: "Split Fiction", flop: "lost soul aside", anticipated: "resdient evil 9", char: "verso", boss: "curator", song: "Une vie à t'aimer https://www.youtube.com/watch?v=3kMbTzomh94", honorable: "prince of persia the lost crown" },
            { name: "NbTuN", goty: "Clair Obscur: Expedition 33", gameplay: "clair obscure expdetion 33", story: "clair obscure expdetion 33", art: "clair obscure expdetion 33", music: "dynasty warriors origins", indie: "clair obscure expdetion 33", remaster: "The Elder Scrolls IV: Oblivion Remastered", multi: "Split Fiction", flop: "lost soul aside", anticipated: "The Witcher 4", char: "verso", boss: "Enhanced dark dragon", song: "Une vie à peindre https://www.youtube.com/watch?v=-i_nT9d-mK8", honorable: "Trepang2" },
            { name: "silver", goty: "Clair Obscur: Expedition 33", gameplay: "clair obscure expdetion 33", story: "clair obscure expdetion 33", art: "clair obscure expdetion 33", music: "clair obscure expdetion 33", indie: "clair obscure expdetion 33", remaster: "", multi: "dying light the beast", flop: "lost soul aside", anticipated: "stranger of heaven", char: "verso", boss: "curator", song: "Une vie à peindre https://www.youtube.com/watch?v=-i_nT9d-mK8", honorable: "prince of persia the lost crown" },
            { name: "اللواء جيري", goty: "Clair Obscur: Expedition 33", gameplay: "ninja gaiden 4", story: "clair obscure expdetion 33", art: "split fiction", music: "clair obscure expdetion 33", indie: "clair obscure expdetion 33", remaster: "trails in the sky 1st chapter", multi: "Split Fiction", flop: "lost soul aside", anticipated: "stranger of heaven", char: "verso", boss: "curator", song: "Une vie à t'aimer", honorable: "Bioshock Infinite" },
            { name: "فراس", goty: "Clair Obscur: Expedition 33", gameplay: "ninja gaiden 4", story: "clair obscure expdetion 33", art: "split fiction", music: "clair obscure expdetion 33", indie: "clair obscure expdetion 33", remaster: "The Elder Scrolls IV: Oblivion Remastered", multi: "Split Fiction", flop: "lost soul aside", anticipated: "stranger of heaven", char: "verso", boss: "Arlecchino, the Blood Artist", song: "Une vie à peindre", honorable: "Bioshock Infinite" }
        ];

        // --- UPDATED VISUALS (GIPHY ONLY) ---
        // --- UPDATED VISUALS (SMOOTH & ATMOSPHERIC LOOPS) ---
        const BACKGROUNDS = [
            "https://media.giphy.com/media/26tn33aiTi1jkl6H6/giphy.gif", // 0: Retro Grid (Welcome/Music - Smooth Synthwave)
            "https://media.giphy.com/media/BkL4VyoRzPJxwVo8jm/giphy.gif", // 1: Blue Tech/Data Flow (Gameplay - Clean)
            "https://media.giphy.com/media/1BgQP5hQ1SUjC/giphy.gif",     // 2: Fantasy Forest/Particles (Story - Calming)
            "https://media.giphy.com/media/3o7TKrEzvJbsQNt6mI/giphy.gif", // 3: Ink in Water (Art - Very artistic & slow)
            "https://media.giphy.com/media/u49M5PHFMzwQPnDnYN/giphy.gif", // 4: Pixel Art Rain (Indie - Aesthetic & Chill)
            "https://media.giphy.com/media/l41lFw057lAJcYg00/giphy.gif", // 5: Glitch/VHS (Remaster - Retro vibe)
            "https://media.giphy.com/media/QwdkJ0gCU11mxFb15L/giphy.gif", // 6: Cyberpunk City (Multiplayer - Busy but distant)
            "https://media.giphy.com/media/VbQXn4qViKHxC/giphy.gif",      // 7: Static/Noise (Flop - Distorted)
            "https://media.giphy.com/media/xTiTnirRhvU53qg8X6/giphy.gif", // 8: Abstract Tunnel (Anticipated - Moving forward)
            "https://media.giphy.com/media/3o7aCRZYNerX4ovs9W/giphy.gif", // 9: Fire/Embers (Boss/Char - Intense but slow)
            "https://media.giphy.com/media/l2JHVUriDGEtWOx0c/giphy.gif", // 10: Gold Dust/Sparkles (GOTY - Premium)
            "https://media.giphy.com/media/l2Je66zG6mAAZxgqI/giphy.gif"  // 11: Summary (Sunset - Ending)
        ];

        const CATEGORY_BG_MAP = {
            gameplay: 1,      // Blue Tech Flow
            story: 2,         // Magical Forest
            art: 3,           // Ink mixing
            music: 0,         // Synthwave Grid
            indie: 4,         // Cozy Pixel Rain
            remaster: 5,      // Retro Glitch
            multi: 6,         // Neon City
            flop: 7,          // Static
            anticipated: 8,   // Warp Tunnel
            char: 9,          // Fire/Embers
            boss: 9,          // Fire/Embers
            song: 0,          // Synthwave Grid
            honorable: 11,    // Sunset
            goty: 10          // Gold Sparkles
        };
        
        const CATEGORIES = [
            { id: 'gameplay', labelAr: 'أفضل جيمبلاي', icon: Gamepad2, color: 'text-blue-400' },
            { id: 'story', labelAr: 'أفضل قصة', icon: BookOpen, color: 'text-yellow-400' },
            { id: 'art', labelAr: 'أفضل توجه فني', icon: Paintbrush, color: 'text-pink-400' },
            { id: 'music', labelAr: 'أفضل ألبوم', icon: Music, color: 'text-purple-400' },
            { id: 'indie', labelAr: 'أفضل لعبة مستقلة', icon: Ghost, color: 'text-green-400' },
            { id: 'remaster', labelAr: 'أفضل نسخة محسنة', icon: Sparkles, color: 'text-cyan-400' },
            { id: 'multi', labelAr: 'أفضل لعبة جماعية', icon: Users, color: 'text-orange-400' },
            { id: 'flop', labelAr: 'مقلب السنة', icon: Skull, color: 'text-red-600' },
            { id: 'anticipated', labelAr: 'أكثر لعبة منتظرة', icon: Clock, color: 'text-indigo-400' },
            { id: 'char', labelAr: 'أفضل شخصية', icon: Star, color: 'text-yellow-200' },
            { id: 'boss', labelAr: 'أفضل مواجهة', icon: Star, color: 'text-red-400' },
            { id: 'song', labelAr: 'أفضل أغنية', icon: Mic2, color: 'text-teal-300' },
            { id: 'honorable', labelAr: 'ألعاب تستحق الذكر', icon: Trophy, color: 'text-gray-300' },
            { id: 'goty', labelAr: 'لعبة السنة 2025', icon: Trophy, color: 'text-amber-500' },
        ];

        const FINAL_CANDIDATES = {
            gameplay: ["Clair Obscur: Expedition 33", "Hollow Knight: Silksong", "Ninja Gaiden 4", "The First Berserker: Khazan"],
            story: ["Kingdom Come: Deliverance II", "Clair Obscur: Expedition 33", "Hollow Knight: Silksong", "The Alters"],
            art: ["Clair Obscur: Expedition 33", "Hollow Knight: Silksong", "Ghost of Yotei", "Split Fiction"],
            music: ["Clair Obscur: Expedition 33", "Death Stranding 2", "Dynasty Warriors Origins"],
            indie: ["Clair Obscur: Expedition 33", "Hollow Knight: Silksong", "Haste"],
            remaster: ["MGS Delta: Snake Eater", "The Elder Scrolls IV: Oblivion Remastered", "Ninja Gaiden 2 Black", "Trails in the Sky 1st Chapter", "Xenoblade Chronicles X"],
            multi: ["Sonic Racing: CrossWorlds", "Dying Light The Beast", "Gentelman Dispute", "Mario Kart World", "ARC Raiders", "Split Fiction", "Mage Arena", "Battlefield 6", "Rv There Yet", "Peak", "Elden Ring: Nightreign", "R.E.P.O.", "Elden Ring Nightrain"],
            flop: ["Lost Soul Aside", "Vampire: The Masquerade - Bloodlines 2", "Little Nightmares 3", "Hunter x Hunter: Nen x Impact"],
            anticipated: ["The Witcher 4", "Resident Evil 9", "Stranger of Heaven"],
            char: ["Renoir", "Verso", "Gustave", "Maelle"],
            boss: ["Simon", "Curator", "Enhanced Dark Dragon", "Fulghor Champion of Nightglow", "Arlecchino, the Blood Artist"],
            song: ["Une vie à t'aimer", "Lumière", "To the Wilder", "Story of Rainy", "Une vie à peindre", "Alicia", "Lisrim Golden", "The Clear Blue Sky", "Skarrsinger Karmelita", "CAPRICIOUS WIND", "Ailne"],
            goty: ["Kingdom Come: Deliverance II", "Clair Obscur: Expedition 33", "Hollow Knight: Silksong", "Doom: The Dark Ages", "Monster Hunter Wilds"],
            honorable: []
        };

        // --- HELPER FUNCTIONS ---
        const normalizeName = (name) => {
            if (!name) return null;
            let n = name.toLowerCase().trim();
            
            if (n.includes("dispatch")) return "Dispatch";
            if (n.includes("khazan") || n.includes("khzan")) return "The First Berserker: Khazan";
            if (n.includes("haste")) return "Haste";
            if (n.includes("xenoblade")) return "Xenoblade Chronicles X";
            if (n.includes("trails")) return "Trails in the Sky 1st Chapter";
            if (n.includes("sonic racing")) return "Sonic Racing: CrossWorlds";
            if (n.includes("dying light")) return "Dying Light The Beast";
            if (n.includes("gentelman")) return "Gentelman Dispute";
            if (n.includes("mario kart")) return "Mario Kart World";
            if (n.includes("arc raiders")) return "ARC Raiders";
            if (n.includes("battlefield")) return "Battlefield 6";
            if (n.includes("rv there yet")) return "Rv There Yet";
            if (n.includes("peak")) return "Peak";
            if (n.includes("mage arena")) return "Mage Arena";
            if (n.includes("r.e.p.o")) return "R.E.P.O.";
            if (n.includes("nightrain")) return "Elden Ring Nightrain";
            if (n.includes("nightreign")) return "Elden Ring: Nightreign";
            if (n.includes("little nightmares")) return "Little Nightmares 3";
            if (n.includes("the alters")) return "The Alters";
            if (n.includes("dynasty")) return "Dynasty Warriors Origins";
            if (n.includes("clair")) return "Clair Obscur: Expedition 33";
            if (n.includes("silksong")) return "Hollow Knight: Silksong";
            if (n.includes("kingdom come")) return "Kingdom Come: Deliverance II";
            if (n.includes("oblivion")) return "The Elder Scrolls IV: Oblivion Remastered";
            if (n.includes("bloodlines 2")) return "Vampire: The Masquerade - Bloodlines 2";
            if (n.includes("witcher 4")) return "The Witcher 4";
            if (n.includes("resident evil 9") || n.includes("resdient")) return "Resident Evil 9";
            if (n.includes("ninja gaiden 4")) return "Ninja Gaiden 4";
            if (n.includes("death stranding")) return "Death Stranding 2";
            if (n.includes("prince of persia")) return "Prince of Persia: The Lost Crown";
            if (n.includes("split fiction")) return "Split Fiction";
            if (n.includes("lost soul aside")) return "Lost Soul Aside";
            if (n.includes("stranger of heaven")) return "Stranger of Heaven";
            if (n.includes("hunter x hunter")) return "Hunter x Hunter: Nen x Impact";
            if (n.includes("snake eater") || n.includes("metal gear")) return "MGS Delta: Snake Eater";
            if (n.includes("monster hunter")) return "Monster Hunter Wilds";
            if (n.includes("ghost of yotei")) return "Ghost of Yotei";
            if (n.includes("renoir")) return "Renoir";
            if (n.includes("verso")) return "Verso";
            if (n.includes("gustave")) return "Gustave";
            if (n.includes("maelle")) return "Maelle";
            if (n.includes("simon")) return "Simon";
            if (n.includes("curator")) return "Curator";
            if (n.includes("enhanced dark dragon")) return "Enhanced Dark Dragon";
            if (n.includes("fulghor")) return "Fulghor Champion of Nightglow";
            if (n.includes("arlecchino")) return "Arlecchino, the Blood Artist";

            return n.replace(/\b\w/g, l => l.toUpperCase());
        };

        const extractSongName = (text) => {
            if (!text) return null;
            let rawName = text;
            if (text.includes("http")) {
                rawName = text.split("http")[0];
            }
            
            const n = rawName.toLowerCase().trim();
            if (n.includes("une vie à t'aimer")) return "Une vie à t'aimer";
            if (n.includes("lumière") || n.includes("lumiere")) return "Lumière";
            if (n.includes("to the wilder")) return "To the Wilder";
            if (n.includes("story of rainy")) return "Story of Rainy";
            if (n.includes("une vie à peindre")) return "Une vie à peindre";
            if (n.includes("alicia")) return "Alicia";
            if (n.includes("lirism") || n.includes("lisrim")) return "Lisrim Golden";
            if (n.includes("clear blue sky")) return "The Clear Blue Sky";
            if (n.includes("skarrsinger")) return "Skarrsinger Karmelita";
            if (n.includes("capricious wind")) return "CAPRICIOUS WIND";
            if (n.includes("ailne") || n.includes("aline")) return "Ailne";

            return normalizeName(rawName);
        };

        // Get Honorable Mentions as a list of {game, voter}
        const getHonorableMentionsList = () => {
            // We check both stages for 'honorable' entries and map them to the voter
            const allVotes = [...STAGE_1_VOTES, ...STAGE_2_VOTES];
            const mentions = [];
            const seen = new Set();

            allVotes.forEach(vote => {
                if (vote.honorable) {
                    const game = normalizeName(vote.honorable);
                    const voter = vote.name;
                    // Create a unique key to avoid exact duplicates if same person voted twice
                    const key = `${game}-${voter}`;
                    if (game && !seen.has(key)) {
                        seen.add(key);
                        mentions.push({ game, voter });
                    }
                }
            });
            return mentions;
        };

        const processData = (dataSet, isFinalStage = false) => {
            const results = {};
            CATEGORIES.forEach(cat => {
                results[cat.id] = {};
                if (isFinalStage && FINAL_CANDIDATES[cat.id]) {
                    FINAL_CANDIDATES[cat.id].forEach(candidateName => {
                        results[cat.id][candidateName] = 0;
                    });
                }
            });

            dataSet.forEach(vote => {
                CATEGORIES.forEach(cat => {
                    const rawValue = vote[cat.id];
                    if (rawValue) {
                        const values = rawValue.split(/,|،/); 
                        values.forEach(v => {
                            let normalized;
                            if (cat.id === 'song') {
                                normalized = extractSongName(v);
                            } else {
                                normalized = normalizeName(v);
                            }
                            
                            if (normalized && normalized.length > 1) {
                                if (isFinalStage && FINAL_CANDIDATES[cat.id]) {
                                    if (!FINAL_CANDIDATES[cat.id].includes(normalized)) return;
                                }
                                if (results[cat.id][normalized] === undefined) {
                                    if (!isFinalStage) results[cat.id][normalized] = 0;
                                }
                                if (results[cat.id][normalized] !== undefined) {
                                    results[cat.id][normalized]++;
                                }
                            }
                        });
                    }
                });
            });

            const sortedResults = {};
            CATEGORIES.forEach(cat => {
                let entries = Object.entries(results[cat.id]).map(([name, count]) => ({ name, count }));
                entries.sort((a, b) => b.count - a.count);
                
                let currentRank = 1;
                for (let i = 0; i < entries.length; i++) {
                    if (i > 0 && entries[i].count < entries[i - 1].count) {
                        currentRank = i + 1;
                    }
                    entries[i].rank = currentRank;
                }

                if (isFinalStage && cat.id === 'multi') {
                    entries = entries.filter(entry => entry.rank !== 5);
                }
                
                sortedResults[cat.id] = entries;
            });
            return sortedResults;
        };

        const getFilteredStage1Data = (data) => {
            if (!data || data.length <= 5) return data;
            const fifthPlaceCount = data[4].count;
            return data.filter(item => item.count >= fifthPlaceCount);
        };

        // --- COMPONENTS ---

        const BackgroundLayer = ({ stage, currentCategory }) => {
            const [gifIndex, setGifIndex] = useState(0);

            useEffect(() => {
                if (stage === 'welcome') setGifIndex(0);
                else if (stage === 'summary') setGifIndex(1);
                else if (stage === 'awards' && currentCategory) {
                    const mappedIndex = CATEGORY_BG_MAP[currentCategory.id];
                    setGifIndex(mappedIndex !== undefined ? mappedIndex : 0);
                } else setGifIndex(2);
            }, [stage, currentCategory]);

            return (
                <div className="fixed inset-0 z-0 overflow-hidden">
                    <div 
                        className="absolute inset-0 bg-cover bg-center transition-all duration-1000 transform scale-110"
                        style={{ 
                            backgroundImage: `url("${BACKGROUNDS[gifIndex]}")`,
                            filter: 'blur(4px) brightness(0.6)'
                        }}
                    />
                    <div className="absolute inset-0 bg-gradient-to-b from-black/80 via-black/60 to-black/80 z-10"></div>
                    <div className="absolute inset-0 opacity-10 z-10" style={{backgroundImage: "url('https://www.transparenttextures.com/patterns/cubes.png')"}}></div>
                </div>
            );
        };

        const Confetti = ({ isActive }) => {
            if (!isActive) return null;
            const particles = Array.from({ length: 50 }).map((_, i) => ({
                id: i,
                x: Math.random() * 100,
                delay: Math.random() * 2,
                color: ['#fbbf24', '#f472b6', '#60a5fa', '#a78bfa'][Math.floor(Math.random() * 4)]
            }));

            return (
                <div className="fixed inset-0 pointer-events-none z-50 overflow-hidden">
                    {particles.map(p => (
                        <div
                            key={p.id}
                            className="absolute w-3 h-3 rounded-full"
                            style={{
                                left: `${p.x}%`,
                                top: '-5%',
                                backgroundColor: p.color,
                                animation: `fall ${3 + Math.random()}s linear infinite`,
                                animationDelay: `${p.delay}s`
                            }}
                        />
                    ))}
                    <style>{`@keyframes fall { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(360deg); opacity: 0; } }`}</style>
                </div>
            );
        };

        const StageHeader = ({ subtext, isFinal }) => (
            <div className="fixed top-0 left-0 right-0 p-4 flex justify-center z-40 bg-gradient-to-b from-black/80 to-transparent pointer-events-none">
                <div className="flex flex-col items-center">
                    <span className={`px-4 py-1 backdrop-blur-md rounded-full text-xs font-bold tracking-[0.2em] text-white uppercase border transition-colors duration-500 ${isFinal ? 'bg-yellow-500/20 border-yellow-500/50 text-yellow-100' : 'bg-white/10 border-white/20'}`}>
                        {isFinal ? "النتائج النهائية" : "المرشحون (المرحلة الأولى)"}
                    </span>
                    {subtext && <span className="text-xs text-gray-400 mt-1">{subtext}</span>}
                </div>
            </div>
        );

        const StageView = ({ category, nomineesData, finalData, onNext, onPrev }) => {
            const [revealed, setRevealed] = useState(false);
            
            useEffect(() => { setRevealed(false); }, [category.id]);

            // Determine data to show
            const isHonorable = category.id === 'honorable';
            
            // Logic for Standard Categories
            const filteredNominees = useMemo(() => getFilteredStage1Data(nomineesData), [nomineesData]);
            const currentData = revealed ? finalData : filteredNominees;
            
            // Logic for Honorable Mentions (Just a list)
            const honorableList = useMemo(() => getHonorableMentionsList(), []);

            const getWinners = (data) => {
                if (!data || data.length === 0) return [];
                const maxVotes = data[0].count;
                return data.filter(d => d.count === maxVotes);
            };

            const winners = getWinners(finalData);
            const isTie = winners.length > 1;
            const Icon = category.icon;

            return (
                <div className="flex flex-col items-center justify-center min-h-screen w-full max-w-5xl mx-auto p-6 pt-20 relative z-20">
                    <Confetti isActive={revealed && !isHonorable} />
                    {!isHonorable && <StageHeader subtext={category.labelAr} isFinal={revealed} />}
                    
                    {/* Header Area - Updated with new font and spacing */}
                    <div className="mb-12 text-center animate-fade-in pt-10"> 
                        <div className={`inline-flex p-4 rounded-full bg-gray-800/50 backdrop-blur mb-6 ${category.color} shadow-2xl`}>
                            <Icon size={48} />
                        </div>
                        {/* Adjusted text size and padding for Arabic text */}
                        <h2 className="text-3xl md:text-5xl font-black uppercase tracking-wider text-transparent bg-clip-text bg-gradient-to-br from-white to-gray-300 mb-2 drop-shadow-lg py-2 leading-relaxed">
                            {category.labelAr}
                        </h2>
                    </div>

                    {/* Special View for Honorable Mentions */}
                    {isHonorable ? (
                        <div className="w-full grid grid-cols-1 md:grid-cols-2 gap-4 mb-16 max-h-[60vh] overflow-y-auto scrollbar-thin p-2">
                            {honorableList.map((item, idx) => (
                                <div key={idx} className="bg-black/60 border border-white/10 p-4 rounded-xl hover:bg-white/5 transition-colors backdrop-blur-md flex flex-col">
                                    <span className="text-xl font-bold text-yellow-400 font-english">{item.game}</span>
                                    <span className="text-sm text-gray-400 mt-1">من اختيار: <span className="text-white font-bold">{item.voter}</span></span>
                                </div>
                            ))}
                        </div>
                    ) : (
                        /* Standard View for Competitive Categories */
                        <div className="w-full grid grid-cols-1 md:grid-cols-2 gap-8 mb-16">
                            {/* Left Col: List */}
                            <div className="bg-black/60 border border-white/10 rounded-2xl p-6 backdrop-blur-xl shadow-2xl overflow-hidden relative transition-all duration-500">
                                <div className={`absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-purple-500 to-transparent opacity-50 transition-opacity ${revealed ? 'opacity-0' : 'opacity-100'}`}></div>
                                <div className={`absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-yellow-500 to-transparent opacity-50 transition-opacity ${revealed ? 'opacity-100' : 'opacity-0'}`}></div>
                                
                                <div className="flex justify-between items-center mb-6 border-b border-white/10 pb-2">
                                    <h4 className="text-xl text-gray-200 uppercase tracking-widest font-bold">
                                        {revealed ? "الترتيب النهائي" : "أبرز المرشحين"}
                                    </h4>
                                    {revealed && <span className="text-xs text-yellow-400 font-bold uppercase px-2 py-1 bg-yellow-500/20 rounded border border-yellow-500/30">المرحلة النهائية</span>}
                                </div>
                                
                                <div className="space-y-4 max-h-[50vh] overflow-y-auto pr-2 scrollbar-thin">
                                    {currentData.map((item, idx) => {
                                        const maxVotes = currentData[0]?.count || 1; 
                                        const isTop = revealed ? item.rank === 1 : item.count === maxVotes && item.count > 0;
                                        
                                        return (
                                            <div key={idx} className="flex items-center justify-between group hover:bg-white/5 p-2 rounded transition-colors">
                                                <span className={`text-lg font-medium font-english text-left dir-ltr flex-1 transition-colors ${isTop ? 'text-yellow-400' : 'text-gray-300 group-hover:text-white'}`}>
                                                    {item.name}
                                                </span>
                                                <div className="flex items-center gap-3">
                                                    <div className="h-2 rounded-full bg-gray-700/50 w-24 md:w-32 overflow-hidden">
                                                        <div 
                                                            className={`h-full rounded-full transition-all duration-1000 ease-out ${isTop ? 'bg-yellow-400 shadow-[0_0_10px_rgba(250,204,21,0.5)]' : 'bg-purple-600'}`}
                                                            style={{ width: `${(item.count / (maxVotes || 1)) * 100}%` }}
                                                        ></div>
                                                    </div>
                                                    <span className={`text-sm font-mono w-16 text-right ${revealed ? 'text-yellow-500 font-bold' : 'text-gray-400'}`}>
                                                        {revealed ? `#${item.rank}` : `${item.count}`}
                                                    </span>
                                                </div>
                                            </div>
                                        )
                                    })}
                                    {currentData.length === 0 && <div className="text-gray-500 italic">لا توجد بيانات لهذه المرحلة.</div>}
                                </div>
                            </div>

                            {/* Right Col: Reveal Button / Winner Box */}
                            <div className="flex flex-col items-center justify-center min-h-[300px]">
                                {!revealed ? (
                                    <button 
                                        onClick={() => setRevealed(true)}
                                        className="group relative px-10 py-5 bg-white text-black font-black text-xl uppercase tracking-widest hover:bg-yellow-400 transition-all duration-300 transform hover:scale-105 rounded-lg overflow-hidden shadow-lg"
                                    >
                                        <span className="relative z-10">كشف الفائز</span>
                                        <div className="absolute inset-0 border-2 border-white group-hover:border-yellow-400 rounded-lg scale-105 opacity-0 group-hover:opacity-100 transition-all duration-300"></div>
                                    </button>
                                ) : (
                                    <div className="animate-bounce-in flex flex-col items-center text-center w-full">
                                        <div className="mb-4 text-yellow-400 animate-bounce">
                                            <Trophy size={80} />
                                        </div>
                                        <div className="text-2xl text-yellow-400 font-bold uppercase tracking-widest mb-4 font-serif italic">
                                            {isTie ? "تعادل!" : "الفائز هو"}
                                        </div>
                                        
                                        <div className="flex flex-col gap-4 items-center mb-6">
                                            {winners.map((winner, i) => (
                                                <div key={i} className="relative">
                                                    <h1 className="relative text-4xl md:text-6xl font-black text-white drop-shadow-xl leading-tight font-english">
                                                        {winner.name}
                                                    </h1>
                                                    {isTie && i < winners.length -1 && <div className="text-gray-400 font-serif italic my-2">&</div>}
                                                </div>
                                            ))}
                                        </div>

                                        <div className="px-8 py-3 bg-gradient-to-r from-transparent via-yellow-500/20 to-transparent border-y border-yellow-500/30 text-yellow-200 font-mono text-xl">
                                            المركز الأول
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* Navigation */}
                    <div className="flex gap-4 mt-auto w-full justify-between">
                        <button 
                            onClick={onNext} 
                            className="px-6 py-3 rounded-lg bg-purple-600 hover:bg-purple-500 text-white font-bold flex items-center gap-2 shadow-lg flex-row-reverse"
                        >
                            <ArrowRight size={20} className="rotate-180" /> {category.id === 'honorable' ? "عرض الملخص" : "التالي"} 
                        </button>
                        
                        <button 
                            onClick={onPrev} 
                            disabled={category.id === 'gameplay'}
                            className="px-6 py-3 rounded-lg bg-black/50 hover:bg-black/70 text-white disabled:opacity-30 flex items-center gap-2 border border-white/10 backdrop-blur-md flex-row-reverse"
                        >
                             السابق <ArrowLeft size={20} className="rotate-180" />
                        </button>
                    </div>
                </div>
            );
        };

        const SummaryView = ({ processedData, onRestart }) => {
            // Filter out honorable from summary grid usually, or keep it?
            const CATEGORIES_LIST = CATEGORIES.filter(c => c.id !== 'honorable'); 
            
            return (
                <div className="min-h-screen w-full max-w-6xl mx-auto p-8 py-12 relative z-20">
                    <StageHeader subtext="ملخص النتائج النهائية" isFinal={true} />
                    <div className="text-center mb-16 mt-12">
                        <h1 className="text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-200 to-yellow-600 mb-4 drop-shadow-lg">الفائزون</h1>
                        <p className="text-2xl text-gray-300">ملخص الفائزين في حفل 2025</p>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {CATEGORIES_LIST.map(cat => {
                            const data = processedData[cat.id];
                            if (!data || data.length === 0) return null;
                            const maxVotes = data[0].count;
                            const winners = data.filter(d => d.count === maxVotes);
                            const Icon = cat.icon;

                            return (
                                <div key={cat.id} className="bg-black/60 border border-white/10 p-6 rounded-xl hover:border-purple-500/50 transition-colors group backdrop-blur-md">
                                    <div className="flex items-center gap-3 mb-4 flex-row-reverse justify-end">
                                        <span className="text-sm text-gray-400 uppercase tracking-wider font-bold">{cat.labelAr}</span>
                                        <Icon size={24} className={cat.color} />
                                    </div>
                                    <div className="text-xl font-bold text-white group-hover:text-yellow-400 transition-colors text-left font-english" dir="ltr">
                                        {winners.map((w, i) => (
                                            <span key={i}>
                                                {w.name}
                                                {i < winners.length - 1 ? <span className="text-gray-500"> / </span> : ''}
                                            </span>
                                        ))}
                                    </div>
                                </div>
                            )
                        })}
                    </div>
                    
                    <div className="flex justify-center mt-16">
                        <button onClick={onRestart} className="px-8 py-3 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-colors flex items-center gap-2 shadow-lg">
                            <Play size={20} /> إعادة العرض
                        </button>
                    </div>
                </div>
            )
        }

        const WelcomeScreen = ({ onStart }) => (
            <div className="min-h-screen flex flex-col items-center justify-center relative overflow-hidden z-20">
                <div className="z-10 text-center p-8">
                    <div className="mb-8 inline-block animate-bounce">
                        <Trophy size={100} className="text-yellow-500" />
                    </div>
                    <h1 className="text-7xl md:text-9xl font-black text-white mb-2 tracking-tighter drop-shadow-2xl">
                        لعبة السنة <span className="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600">2025</span>
                    </h1>
                    <h2 className="text-2xl md:text-4xl text-gray-300 font-light mb-12 tracking-[0.2em] uppercase border-t border-b border-white/20 py-4 backdrop-blur-sm">
                        حفل توزيع الجوائز
                    </h2>
                    <button 
                        onClick={onStart}
                        className="group relative px-12 py-6 bg-white text-black font-black text-2xl uppercase tracking-widest hover:bg-purple-600 hover:text-white transition-all duration-500 rounded-lg overflow-hidden shadow-xl"
                    >
                        <span className="relative z-10 flex items-center gap-4 flex-row-reverse">
                            ابدأ العرض <ArrowLeft size={24} className="group-hover:-translate-x-2 transition-transform"/>
                        </span>
                    </button>
                </div>
            </div>
        );

        const App = () => {
            const [stage, setStage] = useState('welcome'); 
            const [currentCatIndex, setCurrentCatIndex] = useState(0);
            
            const dataStage1 = useMemo(() => processData(STAGE_1_VOTES, false), []);
            const dataStage2 = useMemo(() => processData(STAGE_2_VOTES, true), []);

            const nextCategory = () => {
                if (currentCatIndex < CATEGORIES.length - 1) {
                    setCurrentCatIndex(prev => prev + 1);
                } else {
                    setStage('summary');
                }
            };

            const prevCategory = () => {
                if (currentCatIndex > 0) {
                    setCurrentCatIndex(prev => prev - 1);
                }
            };

            const startAwards = () => {
                setStage('awards');
                setCurrentCatIndex(0);
            };

            const restart = () => {
                setStage('welcome');
                setCurrentCatIndex(0);
            }

            return (
                <div className="min-h-screen bg-black text-white font-sans selection:bg-purple-500 selection:text-white relative">
                    <BackgroundLayer stage={stage} currentCategory={CATEGORIES[currentCatIndex]} />
                    {stage === 'welcome' && <WelcomeScreen onStart={startAwards} />}
                    {stage === 'awards' && (
                        <StageView 
                            category={CATEGORIES[currentCatIndex]} 
                            nomineesData={dataStage1[CATEGORIES[currentCatIndex].id]}
                            finalData={dataStage2[CATEGORIES[currentCatIndex].id]}
                            onNext={nextCategory}
                            onPrev={prevCategory}
                        />
                    )}
                    {stage === 'summary' && (
                        <SummaryView processedData={dataStage2} onRestart={restart} />
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
